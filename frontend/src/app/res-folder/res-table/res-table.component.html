<div class="d-flex justify-content-between gap-3" style="align-items: stretch">
  <mat-form-field class="input-box flex-grow-1" hideRequiredMarker="true">
    <mat-label>Busqueda por Nro. Documento...</mat-label>
    <input
      matInput
      type="text"
      [(ngModel)]="filterRows"
      name="filterPost"
      placeholder=""
    />
  </mat-form-field>
  <mat-form-field
    class="input-box"
    hideRequiredMarker="true"
    style="flex: 0 0 250px"
  >
    <mat-label>Fecha (entre Inicio y Fin de Reserva)...</mat-label>
    <input matInput [(ngModel)]="filterDate" name="filterDate" type="date" />
  </mat-form-field>
  <button
    class="btn btn-dark border border-white"
    style="height: 56px; flex: 0 0 150px; display: flex; align-items: center"
    (click)="filterReservations()"
  >
    Filtrar por Fecha
  </button>
</div>
<div class="div-tablas">
  <table
    class="table table-dark table-hover table-bordered table-sm border border-white text-center"
  >
    <thead>
      <tr class="text-danger">
        <th>Fecha de Reserva</th>
        <th>Fecha Inicio Reserva</th>
        <th>Fecha Fin Reserva</th>
        <th>Tipo Doc.</th>
        <th>Nro. Doc.</th>
        <th>Veh√≠culo</th>
        <th>Estado</th>
        <th>Precio Final</th>
        <th>Check-in / Check-out</th>
        <th>Cancelar</th>
        <th>Eliminar</th>
      </tr>
    </thead>
    <tbody>
      <tr
        *ngFor="
          let reservation of filteredReservations
            | filter : filterRows : 'user.documentID'
        "
      >
        <td>{{ formatDate(reservation.reservationDate) }}</td>
        <td>{{ formatDate(reservation.startDate) }}</td>
        <td>{{ formatDate(reservation.plannedEndDate) }}</td>
        <td>{{ reservation.user.documentType }}</td>
        <td>{{ reservation.user.documentID }}</td>
        <td>{{ reservation.vehicle.licensePlate }}</td>
        <td>
          {{
            reservation.realEndDate
              ? "Finalizada"
              : reservation.cancellationDate
              ? "Cancelada"
              : reservation.initialKms
              ? "Check-in realizado"
              : "Sin iniciar"
          }}
        </td>
        <td>
          {{
            reservation.realEndDate
              ? "$" + calculatePrice(reservation)
              : reservation.cancellationDate
              ? "Reserva cancelada"
              : "Reserva no finalizada"
          }}
        </td>
        <td>
          <div class="d-flex justify-content-around">
            <button
              class="btn btn-dark fs-5"
              (click)="checkInRes(reservation)"
              [disabled]="
                reservation.initialKms || reservation.cancellationDate
              "
            >
              <img
                src="../../../assets/check-in-img.png"
                alt="Check-in"
                class="check"
              />
            </button>
            <button
              class="btn btn-dark fs-5"
              (click)="checkOutRes(reservation)"
              [disabled]="
                !reservation.initialKms ||
                reservation.finalKm ||
                reservation.cancellationDate
              "
            >
              <img
                src="../../../assets/check-out-img.png"
                alt="Check-out"
                class="check"
              />
            </button>
          </div>
        </td>
        <td>
          <div class="d-flex justify-content-around">
            <button
              class="btn btn-dark fs-5"
              (click)="cancelRes(reservation)"
              [disabled]="
                reservation.realEndDate || reservation.cancellationDate || reservation.initialKms
              "
            >
              üö´
            </button>
          </div>
        </td>
        <td>
          <div class="d-flex justify-content-around">
            <button
              class="btn btn-dark fs-5"
              (click)="deleteRes(reservation)"
              [disabled]="
                reservation.realEndDate || reservation.cancellationDate || reservation.initialKms
              "
            >
              ‚ùå
            </button>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>
